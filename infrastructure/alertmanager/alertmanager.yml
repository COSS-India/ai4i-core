# Default Alertmanager config (bootstrap). alert-config-sync-service overwrites route + receivers from DB.
global:
  resolve_timeout: 5m
  smtp_smarthost: smtp.gmail.com:587
  smtp_from: bharathia0704@gmail.com
  smtp_auth_username: bharathia0704@gmail.com
  smtp_auth_password: ypuaofsbatebvwye
  smtp_require_tls: true

route:
  receiver: default-admin
  group_by:
    - alertname
    - category
    - severity
    - organization
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h
  routes: []   # Sub-routes; sync service fills this from DB

receivers:
  - name: default-admin
    email_configs:
      - to: admin@ai4i.com
        send_resolved: true
        headers:
          Subject: '[{{ if eq .GroupLabels.severity "critical" }}CRITICAL{{ else if eq .GroupLabels.severity "warning" }}WARNING{{ else }}INFO{{ end }}] {{ .GroupLabels.alertname }} - {{ .GroupLabels.organization }}{{ with (index .Alerts 0).Labels.endpoint }} - {{ . }}{{ end }}'
        html: |
          <h2 style="color: {{ if eq .GroupLabels.severity "critical" }}#d32f2f{{ else if eq .GroupLabels.severity "warning" }}#f57c00{{ else }}#1976d2{{ end }};">
            {{ if eq .GroupLabels.severity "critical" }}üö® CRITICAL{{ else if eq .GroupLabels.severity "warning" }}‚ö†Ô∏è WARNING{{ else }}‚ÑπÔ∏è INFO{{ end }}: {{ .GroupLabels.category | title }} Alert
          </h2>
          <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
          <p><strong>Organization:</strong> {{ .GroupLabels.organization }}</p>
          <p><strong>Severity:</strong> {{ .GroupLabels.severity }}</p>
          <p><strong>Category:</strong> {{ .GroupLabels.category }}</p>
          <p><strong>Inference endpoint(s):</strong> {{ range $i, $a := .Alerts }}{{ if index $a.Labels "endpoint" }}{{ if $i }}, {{ end }}{{ $a.Labels.endpoint }}{{ end }}{{ end }}</p>
      - to: bharathia0704@gmail.com
        send_resolved: true
        headers:
          Subject: '[{{ if eq .GroupLabels.severity "critical" }}CRITICAL{{ else if eq .GroupLabels.severity "warning" }}WARNING{{ else }}INFO{{ end }}] {{ .GroupLabels.alertname }} - {{ .GroupLabels.organization }}{{ with (index .Alerts 0).Labels.endpoint }} - {{ . }}{{ end }}'
        html: |
          <h2 style="color: {{ if eq .GroupLabels.severity "critical" }}#d32f2f{{ else if eq .GroupLabels.severity "warning" }}#f57c00{{ else }}#1976d2{{ end }};">
            {{ if eq .GroupLabels.severity "critical" }}üö® CRITICAL{{ else if eq .GroupLabels.severity "warning" }}‚ö†Ô∏è WARNING{{ else }}‚ÑπÔ∏è INFO{{ end }}: {{ .GroupLabels.category | title }} Alert
          </h2>
          <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
          <p><strong>Organization:</strong> {{ .GroupLabels.organization }}</p>
          <p><strong>Severity:</strong> {{ .GroupLabels.severity }}</p>
          <p><strong>Category:</strong> {{ .GroupLabels.category }}</p>
          <p><strong>Inference endpoint(s):</strong> {{ range $i, $a := .Alerts }}{{ if index $a.Labels "endpoint" }}{{ if $i }}, {{ end }}{{ $a.Labels.endpoint }}{{ end }}{{ end }}</p>
