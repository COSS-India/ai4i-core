# NMT Service Environment Configuration Template
# Copy this file to .env and update the values

# NMT Service Configuration
SERVICE_NAME=nmt-service
SERVICE_PORT=8089
SERVICE_HOST=nmt-service
SERVICE_PUBLIC_URL=
SERVICE_INSTANCE_ID=
CONFIG_SERVICE_URL=http://config-service:8082
LOG_LEVEL=INFO

# Model Management Service Configuration
MODEL_MANAGEMENT_SERVICE_URL=http://model-management-service:8091
MODEL_MANAGEMENT_SERVICE_API_KEY=
# Note: MODEL_MANAGEMENT_SERVICE_API_KEY is optional. 
# Authentication is handled by forwarding Authorization/X-API-Key headers from incoming requests.
# This fallback API key is only used if no auth headers are present in the request.
MODEL_MANAGEMENT_CACHE_TTL=300

# PostgreSQL Configuration
# Auth database (for user/session lookups)
DATABASE_URL=postgresql+asyncpg://dhruva_user:dhruva_secure_password_2024@postgres:5432/auth_db
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Multi-tenant database (for tenant-specific schema routing)
# This is where NMT request/result tables are stored in tenant schemas
MULTI_TENANT_DB_URL=postgresql+asyncpg://dhruva_user:dhruva_secure_password_2024@postgres:5432/multi_tenant_db

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_secure_password_2024

# Triton Inference Server Configuration (Optional for fallback)
TRITON_ENDPOINT=http://13.200.133.97:8000
TRITON_API_KEY=your_triton_api_key_here
TRITON_TIMEOUT=20
# TTL (seconds) for caching Triton endpoint/model lookups inside NMT service
#TRITON_ENDPOINT_CACHE_TTL=300
TRITON_CONCURRENCY=20

# Tenant Resolution Configuration
API_GATEWAY_URL=http://api-gateway-service:8080

# NMT Service Configuration
MAX_BATCH_SIZE=90
MAX_TEXT_LENGTH=10000
DEFAULT_SOURCE_LANGUAGE=en
DEFAULT_TARGET_LANGUAGE=hi

# Text Processing Configuration
ENABLE_TEXT_NORMALIZATION=true
ENABLE_SCRIPT_DETECTION=true

# Supported Languages (comma-separated)
SUPPORTED_LANGUAGES=en,hi,ta,te,kn,ml,bn,gu,mr,pa,or,as,ur,sa,ks,ne,sd,kok,doi,mai,brx,mni

# Authentication Configuration
AUTH_ENABLED=true
API_KEY_CACHE_TTL=300
SESSION_TIMEOUT_SECONDS=3600

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Security Configuration
ALLOW_ANONYMOUS_ACCESS=false
REQUIRE_API_KEY=true

# Language Detection Configuration
ENABLE_AUTO_LANGUAGE_DETECTION=true
LANGUAGE_DETECTION_CONFIDENCE_THRESHOLD=0.7
