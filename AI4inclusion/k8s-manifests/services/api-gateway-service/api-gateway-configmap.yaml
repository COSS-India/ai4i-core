apiVersion: v1
kind: ConfigMap
metadata:
  name: api-gateway-config
  namespace: dev
data:
  # API Gateway Service Configuration
  SERVICE_NAME: "api-gateway-service"
  SERVICE_PORT: "8080"
  LOG_LEVEL: "INFO"

  # Redis Configuration (non-secret parts)
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"

  # Rate Limiting Configuration
  RATE_LIMIT_PER_MINUTE: "100"
  RATE_LIMIT_PER_HOUR: "1000"

  # Downstream Service URLs
  AUTH_SERVICE_URL: "http://auth-service:8081"
  CONFIG_SERVICE_URL: "http://config-service:8082"
  METRICS_SERVICE_URL: "http://metrics-service:8083"
  TELEMETRY_SERVICE_URL: "http://telemetry-service:8084"
  ALERTING_SERVICE_URL: "http://alerting-service:8085"
  DASHBOARD_SERVICE_URL: "http://dashboard-service:8086"
  ASR_SERVICE_URL: "http://asr-service:8087"
  TTS_SERVICE_URL: "http://tts-service:8088"
  NMT_SERVICE_URL: "http://nmt-service:8089"
  PIPELINE_SERVICE_URL: "http://pipeline-service:8090"

  # Timeout Configuration
  REQUEST_TIMEOUT: "30"
  CIRCUIT_BREAKER_THRESHOLD: "5"

  # Service Registry Configuration
  SERVICE_REGISTRY_TTL: "300"
  HEALTH_CHECK_INTERVAL: "30"
  HEALTH_CHECK_TIMEOUT: "5"
  MAX_CONSECUTIVE_FAILURES: "3"
  LOAD_BALANCER_ALGORITHM: "weighted_round_robin"

  # Header Propagation Configuration
  ENABLE_CORRELATION_ID: "true"
  ENABLE_REQUEST_ID: "true"
  CORRELATION_ID_HEADER: "X-Correlation-ID"
  REQUEST_ID_HEADER: "X-Request-ID"

  # Retry and Circuit Breaker Configuration
  MAX_RETRY_ATTEMPTS: "2"
  RETRY_BACKOFF_FACTOR: "1.5"
  CIRCUIT_BREAKER_ENABLED: "true"
